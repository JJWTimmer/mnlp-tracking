{% extends "base.html" %}

{% load staticfiles %}

{% block title %}MNLP :: Lion map{% endblock %}

{% block head %}
<link rel="stylesheet" href="{% static "js/OpenLayers/theme/default/style.css" %}">
<link rel="stylesheet" type="text/css" href="{% static "js/OpenLayers/theme/default/google.css" %}">
<style type="text/css">
    .smallmap {
        width: 100%;
        height: 512px;
        border: 1px solid #ccc;
    }

    div.olControlAttribution, div.olControlScaleLine {
          font-family: Verdana;
          font-size: 0.7em;
          bottom: 3px;
    }

    .layersDiv * label {
        display: inline;
    }

    .layersDiv * input {
        margin-top: 0px;
    }
  </style>
{% endblock %}

{% block nav %}
    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </a>
    <a class="brand" href="#">Mara-Naboisho Lion Project</a>
    <div class="nav-collapse collapse">
        <ul class="nav">
            <li class="active"><a href="#">Home</a></li>
            <li><a href="/full">Fullscreen</a></li>
        </ul>
        <!--
        <form class="navbar-form pull-right">
            <input class="span2" type="text" placeholder="Email">
            <input class="span2" type="password" placeholder="Password">
            <button type="submit" class="btn">Sign in</button>
        </form>
        -->
    </div>
{% endblock %}

{% block hero %}
    <div id="map_canvas" class="smallmap"></div>
{% endblock %}

{% block content %}
    <div class="row">
        <div class="span8">
            <h2>Lions in Keyna</h2>
            <p>This map is part of a project to study and preserve lions in Kenya. Please visit <a href="http://www.mnlp.org">www.mnlp.org</a> for the full details. The fullscreen map remembers the date filter from this page.</p>
            <p><a class="btn" href="/full">Fullscreen Map &raquo;</a></p>
        </div>
        <div class="span4">
            <h2>Date Filter</h2>
            <div>
                <form action="#" method="post">{% csrf_token %}
                {{ form.as_p }}
                <input type="submit" value="Filter" />
                </form>
            </div>
        </div>
    </div>
{% endblock %}

{% block js_bottom %}
<script src="http://maps.google.com/maps/api/js?v=3.7&sensor=false"></script>
<script src="{% static "js/mnlp.js" %}"></script>
<script src="{% static "js/OpenLayers/OpenLayers.js" %}"></script>
<script type="text/javascript">

    TheMap.init();

    jQuery.extend(jQuery.datepicker, { afterShow: function(event) {
            jQuery.datepicker._getInst(event.target).dpDiv.css('z-index', 9999); //necessary else datepicker appears behind map
    }});

    $(function() {
        $( ".datepicker" ).datepicker(
            {
                dateFormat: "dd/mm/yy"
            }
        ).focus(function (event) {
            jQuery.datepicker.afterShow(event);
        });
    });
</script>
{% endblock %}